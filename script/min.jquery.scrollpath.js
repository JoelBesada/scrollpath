/* jQuery Scroll Path Plugin by Joel Besada (http://joelb.me/scrollpath). Version 1.1, MIT LICENSED */
(function(h,u,s,M){function N(a,b){function C(a,b){e=Math.min(a,e);m=Math.min(b,m);c=Math.max(a,c);f=Math.max(b,f)}var q=0,k=0,d=0,c=0,f=0,e=0,m=0,v=[{method:"moveTo",args:[0,0]}],n=[],s={rotate:null,callback:null,name:null};this.rotate=function(a,C){var j=h.extend({},s,C),g=Math.abs(a-d),g=Math.round(g/b)*o,c=(a-d)/g,r=1;if(E){for(;r<=g;r++)n.push({x:q,y:k,rotate:d+c*r,callback:r===g?j.callback:null,name:r===g?j.name:null});d=a%(2*Math.PI)}else(j.name||j.callback)&&this.moveTo(q,k,{callback:j.callback,
name:j.name})};this.moveTo=function(a,b,j){var g=h.extend({},s,j),c=n.length?o:1;for(i=0;i<c;i++)n.push({x:a,y:b,rotate:null!==g.rotate?g.rotate:d,callback:i===c-1?g.callback:null,name:i===c-1?g.name:null});q=a;k=b;C(a,b);v.push({method:"moveTo",args:arguments})};this.lineTo=function(b,c,j){for(var g=h.extend({},s,j),f=b-q,r=c-k,e=Math.sqrt(f*f+r*r),e=Math.round(e/a)*o,f=f/e,r=r/e,m=null!==g.rotate&&E,l=m?(g.rotate-d)/e:0,t=1;t<=e;t++)n.push({x:q+f*t,y:k+r*t,rotate:d+l*t,callback:t===e?g.callback:
null,name:t===e?g.name:null});d=m?g.rotate:d;q=b;k=c;C(b,c);v.push({method:"lineTo",args:arguments})};this.arc=function(b,c,j,g,e,f,m){var l=h.extend({},s,m),y=b+Math.cos(g)*j,t=c+Math.sin(g)*j,A=b+Math.cos(e)*j,B=c+Math.sin(e)*j,w,x=g;w=e;var u=f,D=F(x),p=F(w),z=Math.abs(D-p),O=2*Math.PI-z;w=u&&D<p||!u&&D>p||D===p&&x!==w?O:z;x=Math.round(j*w/a)*o;w=w/x*(f?-1:1);D=(u=null!==l.rotate&&E)?(l.rotate-d)/x:0;p=1;for((q!==y||k!==t)&&this.lineTo(y,t);p<=x;p++)n.push({x:b+j*Math.cos(g+w*p),y:c+j*Math.sin(g+
w*p),rotate:d+D*p,callback:p===x?l.callback:null,name:p===x?l.name:null});d=u?l.rotate:d;q=A;k=B;C(b+j,c+j);C(b-j,c-j);v.push({method:"arc",args:arguments})};this.getPath=function(){return n};this.getCanvasPath=function(){for(var a=0;a<v.length;a++)v[a].args[0]-=this.getPathOffsetX(),v[a].args[1]-=this.getPathOffsetY();return v};this.getPathWidth=function(){return c-e+40};this.getPathHeight=function(){return f-m+40};this.getPathOffsetX=function(){return e-20};this.getPathOffsetY=function(){return m-
20}}function P(){l.scrollBar&&(e=h("<div>").addClass("sp-scroll-bar").on("click",function(a){var b=Math.round(a.offsetY/e.height()*(d.length-1));5<Math.abs(b-c)&&(b=c+5*o*(b>c?1:-1));m(b);a.preventDefault();return!1}),y=h("<div>").addClass("sp-scroll-handle").on({click:function(a){a.preventDefault();return!1},mousedown:function(a){G=!0;a.preventDefault();return!1}}),h(s).on({mouseup:function(){G=!1},mousemove:function(a){if(G){var a=a.clientY-e.offset().top,a=Math.round(a/e.height()*(d.length-1)),
b=d.length-1,a=a>b?b:0>a?0:a,b=a%o;m(b>o/2?a+o-b:a-b)}}}),h("body").prepend(e.append(y)))}function Q(){if(l.drawPath&&R){var a;a={position:"absolute","z-index":9998,left:f.getPathOffsetX(),top:f.getPathOffsetY(),"pointer-events":"none"};a[n+"user-select"]=a["user-select"]="none";a[n+"user-drag"]=a["user-drag"]="none";a=h("<canvas>").addClass("sp-canvas").css(a).prependTo(z);a[0].width=f.getPathWidth();a[0].height=f.getPathHeight();a=a[0].getContext("2d");var b=f.getCanvasPath(),d=0;a.shadowBlur=15;
a.shadowColor="black";a.strokeStyle="white";a.lineJoin="round";a.lineCap="round";for(a.lineWidth=10;d<b.length;d++)a[b[d].method].apply(a,b[d].args);a.stroke()}}function J(a){var b=a.originalEvent.wheelDelta||-a.originalEvent.detail,b=b/Math.abs(b);a.preventDefault();h(u).scrollTop(0).scrollLeft(0);A(-b*o)}function S(a){if(!/^text/.test(a.target.type))switch(a.keyCode){case 40:A(o);break;case 38:A(-o);break;case 32:A(5*o*(a.shiftKey?-1:1))}}function A(a){m(K(c+a))}function T(a,b,d,q){if(!(0===a||
B)){if(!b||"number"!==typeof b)return"function"===typeof b&&b(),A(a);B=!0;var e=b/1E3*U,f=c,l=0,n,o=setInterval(function(){n=Math.round((h.easing[d]||h.easing.swing)(++l/e,b/e*l,0,a,b));m(K(f+n),!0);l===e&&(clearInterval(o),"function"===typeof d?d():q&&q(),B=!1)},b/e)}}function m(a,b){if(!B||b){var f=d[a].callback;z.css(V(d[a]));y&&y.css("top",a/(d.length-1)*(e.height()-y.height())+"px");f&&a!==c&&f();c=a}}function K(a){if(l.wrapAround)if(B){for(;0>a;)a+=d.length;for(;a>=d.length;)a-=d.length}else 0>
a&&(a=d.length-1),a>=d.length&&(a=0);else a=a>d.length-1?d.length-1:0>a?0:a;return a}function V(a){var b=a.x-h(u).width()/2,d=a.y-h(u).height()/2,c={};0===F(a.rotate)?(c.left=-b,c.top=-d,c[n+"transform-origin"]=c["transform-origin"]="",c[n+"transform"]=c.transform=""):(c.left=c.top="",c[n+"transform-origin"]=c["transform-origin"]=a.x+"px "+a.y+"px",c[n+"transform"]=c.transform="translate("+-b+"px, "+-d+"px) rotate("+a.rotate+"rad)");return c}function F(a){for(;0>a;)a+=2*Math.PI;return a%(2*Math.PI)}
var n="-"+function(){var a=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,b=s.getElementsByTagName("script")[0],c;for(c in b.style)if(a.test(c))return c.match(a)[0];return"WebkitOpacity"in b.style?"Webkit":"KhtmlOpacity"in b.style?"Khtml":""}().toLowerCase()+"-",E=function(){for(var a=s.createElement("dummy").style,b="transform,WebkitTransform,MozTransform,OTransform,msTransform,KhtmlTransform".split(","),c=0;c<b.length;c++)if(a[b[c]]!==M)return!0;return!1}(),R=!!s.createElement("canvas").getContext,U=
30,o=10,L=!1,G=!1,B=!1,c,f,d,z,e,y,H={scrollSpeed:50,rotationSpeed:Math.PI/15},l={wrapAround:!1,drawPath:!1,scrollBar:!0},I={init:function(a){(1<this.length||L)&&h.error("jQuery.scrollPath can only initialized on *one* element *once*");h.extend(l,a);L=!0;z=this;d=f.getPath();Q();P();m(0);z.css("position","relative");h(s).on({mousewheel:J,DOMMouseScroll:J,keydown:S});h(u).on("resize",function(){m(c)});return this},getPath:function(a){h.extend(H,a);return f||(f=new N(H.scrollSpeed,H.rotationSpeed))},
scrollTo:function(a,b,e,f){var k;a:{for(k=0;k<d.length;k++)if(d[k].name===a)break a;k=null}null===k&&h.error("jQuery.scrollPath could not find scroll target with name '"+a+"'");a=k-c;l.wrapAround&&Math.abs(a)>d.length/2&&(a=k>c?-c-d.length+k:d.length-c+k);T(a,b,e,f)}};h.fn.scrollPath=function(a){if(I[a])return I[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return I.init.apply(this,arguments);h.error("Method "+a+" does not exist on jQuery.scrollPath")}})(jQuery,
window,document);